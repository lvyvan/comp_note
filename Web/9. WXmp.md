# 1. Day 1

## 1.1 小程序的宿主环境 - 组件

### 1.1.1 view

div

### 1.1.2 croll-view

滚动列表视图

### 1.1.3 swiper 和 swiper-item

轮播图容器组件 和 轮播图item

### 1.1.4 text & rich-text

#### text 的基本使用

[text | 微信开放文档 (qq.com)](https://developers.weixin.qq.com/miniprogram/dev/component/text.html)

```html
<view>
文本是否可选，该属性会使文本节点显示为 inline-block
<text user-select="true">18800001234</text>
</view>
```

#### rich-text 富文本

[rich-text | 微信开放文档 (qq.com)](https://developers.weixin.qq.com/miniprogram/dev/component/rich-text.html)

```html
<rich-text nodes="<h1>标题</h1>"></rich-text>
```

### 1.1.5 button 按钮

[button | 微信开放文档 (qq.com)](https://developers.weixin.qq.com/miniprogram/dev/component/button.html)

```html
<!-- 按钮演示 -->

<button> 普通按钮 </button>

<!-- 通过 type 属性指定按钮颜色类型 -->

<button type="primary"> 主色调按钮 </button>

<button type="warn"> 警告按钮 </button>

<rich-text nodes="<hr/>"></rich-text>

  

<!-- 小尺寸按钮 -->

<button size="mini">小尺寸默认</button>

<button size="mini" type="primary">主题按钮</button>

<button size="mini" type="warn">警告按钮</button>

<rich-text nodes="<hr/>"></rich-text>

  

<!-- 镂空按钮 -->

<button plain="true">镂空默认</button>

<button size="mini" plain="true" type="primary">主题镂空</button>
```

#### open-type

|合法值|说明|最低版本|
|---|---|---|
|contact|打开客服会话，如果用户在会话中点击消息卡片后返回小程序，可以从 bindcontact 回调中获得具体信息，[具体说明](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/customer-message/customer-message.html) （*小程序插件中不能使用*）|[1.1.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html)|
|share|触发用户转发，使用前建议先阅读[使用指引](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/share.html#%E4%BD%BF%E7%94%A8%E6%8C%87%E5%BC%95)|[1.2.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html)|
|getPhoneNumber|获取用户手机号，可以从bindgetphonenumber回调中获取到用户信息，[具体说明](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/getPhoneNumber.html) （*小程序插件中不能使用*）|[1.2.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html)|
|getUserInfo|获取用户信息，可以从bindgetuserinfo回调中获取到用户信息 （*小程序插件中不能使用*）|[1.3.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html)|
|launchApp|打开APP，可以通过app-parameter属性设定向APP传的参数[具体说明](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/launchApp.html)|[1.9.5](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html)|
|openSetting|打开授权设置页|[2.0.7](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html)|
|feedback|打开“意见反馈”页面，用户可提交反馈内容并上传[日志](https://developers.weixin.qq.com/miniprogram/dev/api/base/debug/wx.getLogManager.html)，开发者可以登录[小程序管理后台](https://mp.weixin.qq.com/)后进入左侧菜单“客服反馈”页面获取到反馈内容|[2.1.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html)|
|chooseAvatar|获取用户头像，可以从bindchooseavatar回调中获取到头像信息|[2.21.2](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html)|

### 1.1.6 image 图片组件

```html
<!-- image -->

<image></image>

<image mode="aspectFill" class="im" src="/image/vlcsnap-2023-04-14-22h49m27s765.png"></image>
```

```css
image {

  border: 1px solid red;

}
```

#### mode

|合法值|说明|最低版本|
|---|---|---|
|scaleToFill|缩放模式，不保持纵横比缩放图片，使图片的宽高完全拉伸至填满 image 元素||
|aspectFit|缩放模式，保持纵横比缩放图片，使图片的长边能完全显示出来。也就是说，可以完整地将图片显示出来。||
|aspectFill|缩放模式，保持纵横比缩放图片，只保证图片的短边能完全显示出来。也就是说，图片通常只在水平或垂直方向是完整的，另一个方向将会发生截取。||
|widthFix|缩放模式，宽度不变，高度自动变化，保持原图宽高比不变||
|heightFix|缩放模式，高度不变，宽度自动变化，保持原图宽高比不变|[2.10.3](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html)|
|top|裁剪模式，不缩放图片，只显示图片的顶部区域||
|bottom|裁剪模式，不缩放图片，只显示图片的底部区域||
|center|裁剪模式，不缩放图片，只显示图片的中间区域||
|left|裁剪模式，不缩放图片，只显示图片的左边区域||
|right|裁剪模式，不缩放图片，只显示图片的右边区域||
|top left|裁剪模式，不缩放图片，只显示图片的左上边区域||
|top right|裁剪模式，不缩放图片，只显示图片的右上边区域||
|bottom left|裁剪模式，不缩放图片，只显示图片的左下边区域||
|bottom right|裁剪模式，不缩放图片，只显示图片的右下边区域|

#### lazy-load

图片懒加载，在即将进入一定范围（上下三屏）时才开始加载|[1.5.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html)|

### 1.1.7 navigator 页面导航

## 1.2 小程序的宿主环境 - API

### 1.2.1 小程序 API 概述

小程序中的 api 是由宿主环境提供的，通过丰富的 api，开发者可以方便的调用微信提供的能力。

例如：
- 获取用户信息
- 本地存储
- 支付功能等

### 1.2.2 小程序 api 的 3大分类

小程序官方把 api 分为如下 3 大类：

1. 事件监听 api
	- on 开头，用来监听某些事件的触发
	- 例如：wx.onWindowResize(function callback) 监听窗口尺寸的变化
2. 同步 api
	- Sync 结尾
	- 同步 api 的执行结果，可以通过函数返回值直接获取，如果执行结果出错会抛出异常
	- 例如：wx.setStorageSync('key', 'value')向本地存储写入内容
3. 异步 api
	- 类似于 JQuery 中的 $.ajax(options)函数，需要通过 Success, fail, complete 接收调用的结果。
	- wx.request() 发起网络数据请求，通过 success 回调函数接收数据

## 1.3 协同工作和发布

### 1.3.1 协同工作

#### 1. 了解权限管理需求

在中大型的公司里，人员的分工非常仔细：同一个小程序项目，一般会有不同的岗位，不同角色的员工同时参与设计和开发。

此时处于管理需要，迫切需要对不同岗位，不同角色的员工权限进行边界的划分，是其能够高效的进行协同工作。

#### 2. 了解项目成员的组织结构

项目开发分工
- 项目管理者 - 统筹整个项目的进展和风险，把控小程序对外发布的节奏
- 产品组 - 提需求
- 设计组 - 出设计方案
- 开发组 - 代码开发
- 测试组 - 项目测试

#### 3. 程序开发流程

- 提出需求
- 设计
- 开发
- 体验
- 测试
- 发布

### 1.3.2 小程序成员管理

#### 1. 成员管理的两个方面

管理员对小程序项目成员及体验成员的管理

1. 管理员
2. 项目成员 - 
	1. 运营者
	2. 开发者
	3. 数据分析者
3. 体验成员

#### 2. 不同项目成员对应的权限


#### 3. 开发者的权限说明

1. 开发者权限
2. 体验者权限
3. 登录权限
4. 开发设置
5. 腾讯云管理权限

#### 4. 添加项目成员和体验成员

### 1.3.3 小程序版本

#### 1. 软件开发过程中的不同版本

在软件开发过程中，根据时间节点的不同，会产出不同的软件版本，例如：

1. 开发版本 - 开发者编写代码的同时，对项目代码进行自测。
2. 体验版本 - 程序到达一个稳定可体验的状态时，开发者把体验版本给到产品经理和测试人员进行体验测试。
3. 正式版本 - 通过测试和体验后，发布正式版本供外部用户使用。

#### 2. 小程序的版本

1. 开发版本
2. 体验版本 - 某个稳定开发版本作为体验版
3. 审核中的版本 - 只能有一份代码处于审核中。有审核结果后可以发布到线上，也可直接重新提交审核，覆盖原审核版本
4. 线上版本 - 线上所有用户使用的代码版本，该版本代码在新版本代码发布后会被覆盖更新。

### 1.3.4 发布上线

#### 1. 小程序发布上线的整体步骤

1. 上传代码
2. 提交审核
3. 发布

#### 2. 上传代码

填写 版本号 和 项目备注。

#### 3. 在后台查看上传之后的版本

进入小程序后台管理页面 -> 版本管理 -> 开发版本

#### 4. 提交审核

腾讯审核

#### 5. 发布

管理 -> 版本管理 -> 审核版本

#### 6. 基于小程序码进行推广

登录小程序管理后台 -> 设置 -> 基本设置 -> 基本信息 -> 小程序码及线下物料下载


### 1.3.5 运营数据

#### 1. 查看小程序运行数据的两种方式


# 1. Day 2

## 2.1 WXML模板语法

### 2.1.1 数据绑定

#### 1. 数据绑定的基本原则

1. 在 data 中定义数据
2. 在 WXML 中使用数据

#### 2. 在 data 中定义页面数据

在页面对应的 .js 文件中，把数据定义到 data 对象中即可：

#### 3. Mustache 语法的格式

把 data 中的数据绑定到页面中渲染，使用 Mustache 语法（双大括号）将变量抱起来即可。语法格式为：

```html
<view>{{ 要绑定的数据名称 }}</view>
```

#### 4. Mustache 语法的应用场景

Mustache 语法的主要应用场景如下：
- 绑定内容
- 绑定属性
- 运算（三元运算、算术运算等）

#### 5. 动态绑定内容

#### 6. 动态绑定属性

```html
<image src="{{imgSrc}}" mode=""></image>
```

```javascript
  data: {
    imgSrc: 'https://pss.bdstatic.com/static/superman/img/logo/logo_white-d0c9fe2af5.png'
  },
```

#### 7. 三元运算

```html
<view>{{ randomNum1 }}</view>
<view>{{ randomNum1 > 5 ? '随机数大于5': '随机数小于5' }}</view>
```

```js
  data: {
    randomNum1: Math.random() * 10
  },
```

#### 8. 算数运算

```html

```

```js
  data: {
    randomNum: Math.random().toFixed(2)
  },
```

### 2.1.2 事件绑定

#### 1. 什么是事件

事件是渲染层到逻辑层的通讯方式。通过事件可以将用户在渲染层产生的行为，反馈到逻辑层进行业务的处理。

#### 2. 小程序中常用的事件

tap - 触摸事件

input - 文本框输入事件

change - 状态改变时触发

#### 3. 事件对象的属性列表

当事件回调触发的时候，会收到一个事件对象 event，它的详细属性如下表所示：

type - 事件类型

timeStamp - 页面打开到触发事件所经过的毫秒数

target - 触发事件的组件的一些属性值集合

currentTarget - 当前组件的一些属性值集合

detail - 额外的信息

touches - 触摸事件，当前停留在屏幕中的触摸点信息的数组

changedTouches - 触摸事件，当前变化的触摸点信息的数组

#### 4. target 和 currentTarget 的区别

target 是触发该事件的源头组件

currentTarget 是当前事件所绑定的组件

```html
<view class="outer-view" bindtap="outerHandle">
	<butten type="primary"> 按钮 </button>
<view>
```

点击内部的按钮时，点击事件以冒泡的方式向外扩散，也会触发外层 view 的 tap 事件处理函数。

此时，对于外层的 view 来说：

- e.target 指向的触发事件的源头组件，因此，e.target 是内部的按钮组件
- e.currentTarget 指向的是当前正在触发事件的那个组件，因此，e.currentTarget 是当前的 view 组件

#### 5. bindtap 的语法格式

在小程序中，不存在 HTML 中的 onclick 鼠标点击事件，而是通过 tap 事件来响应用户的触摸行为。
- 通过 bindtap，可以为组件绑定 tap 触摸事件
- 在页面的 .js 文件中定义对应的事件处理函数，事件参数通过形参 event (e) 来接收

```html
<button type="primary" bindtap="btnTapHandler">按钮</button>
```

```js
btnTapHandler(e){
	console.log(e)
},
```

#### 6. 在事件处理函数中为 data 中的数据赋值

通过调用 this.setData(dataObject) 方法，可以给页面 data 中的数据重新赋值

```html
<button type="primary" bindtap="btnTapHandler">按钮 {{ count }}</button>
```

```js
data: {
	count: 0,
},

btnTapHandler(e){
this.setData({
	count: this.data.count + 1
  })
	console.log(this.data.count)
},
```

#### 7. 事件传参

小程序中的事件传参比较特殊，不能在绑定事件的同时为事件处理函数传递参数。

```html
<!-- 这样是错误的 -->
<button type="primary" bindtap="btnTapHandler(123)">按钮 {{ count }}</button>
```

因为小程序会把 bindtap 的属性值，统一当作事件名称来处理。

可以为组件提供 data-* 自定义属性传参，其中 * 代表的是参数的名字

```html
<button type="primary" bindtap="btnTapHandler(123)" data-info="3">按钮 {{ count }}</button>
```

在事件处理函数中，通过 event.target.dataset.参数名 即可获取到具体参数的值。

```js
btnTapHandler(e){
	this.setData({
		count: this.data.count + e.target.dataset.info
  })
console.log(e)
},
```

#### 8. bindinput 的语法格式

在小程序中，通过 input 事件来响应文本框的输入事件

- 通过 bindinput，可以为文本框绑定输入事件
- 在页面的 .js 文件中定义事件处理函数，通过 event.detail.value 获取文本框最新的值

```html
<input bindinput="inputHandler"></input>
```

```js
inputHandler(e){
	console.log(e.detail.value)
},
```

#### 9. 实现文本框和 data 之间的数据同步

```html
```

```js
```