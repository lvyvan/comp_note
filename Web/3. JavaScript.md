# 1. JavaScript基础

## 1.1 day1 let/const变量、数据类型、ES6模板字符串

### 1.1.1 JavaScript介绍

#### a. JavaScript 是什么

是一种运行在客户端（浏览器）的编程语言，实现人机交互。

#### b. 作用？

- 网页特效
- 表单验证
- 数据交互
- 服务端编程 node.js

#### c. JavaScipt的组成

1. ECMAScript (规定了 js 基础核心语法)
2. Web APIS 
	1. DOM （操作文档、对页面元素的控制等）
	2. BOM （操作浏览器，比如页面弹窗、存储数据等）

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .pink {
            background-color: pink;
        }
    </style>
    <title>按钮变色</title>
</head>
<body>
    <button class="pink">按钮1</button>
    <button>按钮2</button>
    <button>按钮3</button>
    <button>按钮4</button>
    <script>
    let bts = document.querySelectorAll('button')
    for(let i = 0; i < bts.length; i++){
        bts[i].addEventListener('click', function () {
            document.querySelector('.pink').className = ''
            this.className = 'pink'
        })
    }
</script>
</body>
</html>
```

#### d. javascript位置

1. 内部Js
2. 外部Js
3. 内联Js

#### e. JavaScript 结束符

使用英文 ; 作为结束符

实际开发中，主张省略结束符

#### f. JavaScript 输入输出语法

##### document.write()

识别标签，向`<body></body>`中输出

```js
document.write("<p>write info</p>")
```

##### alert()

弹窗语法

```js
alert('alert info')
```

##### console.log()

控制台输入

```js
console.log('console info')
```

##### prompt()

弹窗输入

```js
prompt('message info')
```

### 1.1.2 变量

#### a. 声明一个变量

声明关键字 `let`
不允许多次声明同一变量

```js
let name
```

赋值

```js
name = 'yvan'
```

声明并赋值

```js
let age = 18
```

输入并输出

```js
	let uname = prompt('enter you uname')
	document.write(uname)
```

交换两个值

```let
	let x = 10
	let y = 20
	let z

	z = x
	x = y
	y = z

	console.log(x, y)
```

#### b. 数组

数组的基本使用

```js
let arr = ['name', 18, 'man']
console.log(arr[1], arr.length)
```

### 1.1.3 常量

const 声明，声明时必须赋值

```js
const G = 9.8
const PI = 3.141592653
```

### 1.1.4 数据类型

基本数据类型
- number 实数 NaN
- string 使用 "" '' 包裹的都叫字符串，没有本质区别
- boolean
- undefined
- null

引用数据类型
- object

#### a. 字符串模板

字符串前后空格、回车、制表符清空

```js
const s = str.trim('')

const s = string.trim()
```

 
### 1.1.5 类型转换

### 1.1.6 案例

## 1.2 day2 运算符、分支、循环

## 1.3 day3 数组

## 1.4 day4 函数

## 1.5 day5 对象、内置对象

---

# 2 Web APIs

## 2.1 day1 DOM获取 & 属性操作

### 2.1.1 DOM树和DOM对象

使用 JS 操作 html 和 浏览器

分类：DOM(文档对象模型)、BOM(浏览器对象模型)

DOM (Docoument Object Model —— 文档对象模型) 是用来呈现以及与任意 HTML 或 XML 文档进行交互的 API

DOM 树 —— 将 HTML 文档以树状结构呈现出来，描述网页内容关系。

DOM 对象 —— 浏览器根据 html 标签兑现生成的 JS 对象，所有的标签属性都可以在这个对象上面找到，修改这个对象的属性会自动映射到标签上。

document 对象 —— 是 DOM 里提供的一个对象，提供的属性和方法都是用来访问和操作网页内容的，网页所有内容都在 document 里面。

### 2.1.2 获取 DOM 对象

#### a. 根据 CSS 选择器来获取 DOM 元素

查找 DOM 元素就是利用 JS 选择页面中标签元素。

##### querySelector

表示文档中与指定的一组 CSS 选择器匹配的第一个元素，一个 [`Element`](https://developer.mozilla.org/zh-CN/docs/Web/API/Element)对象。如果没有匹配到，则返回 null。

[document.querySelector() - Web API 接口参考 | MDN (mozilla.org)](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/querySelector)

```js
document.querySelector('CSS 选择器')
```

```html
<body>
    <div class="box">
        123
    </div>
    <script>
        const box = document.querySelector('.box')
        console.log(box)
    </script>
</body>
```

##### querySelectorAll

一个静态 [`NodeList`](https://developer.mozilla.org/zh-CN/docs/Web/API/NodeList)，包含一个与至少一个指定选择器匹配的元素的[`Element`](https://developer.mozilla.org/zh-CN/docs/Web/API/Element)对象，或者在没有匹配的情况下为空[`NodeList`](https://developer.mozilla.org/zh-CN/docs/Web/API/NodeList)

[Document.querySelectorAll - Web API 接口参考 | MDN (mozilla.org)](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/querySelectorAll)

```js
document.querySelectorAll('CSS 选择器')
```

```html
<body>
    <ul>
        <li>test1</li>
        <li>test2</li>
        <li>test3</li>
    </ul>
    <script>
        const ls = document.querySelectorAll('ul li')
        console.log(ls)
    </script>
</body>
```

```html
<body>
    <ul>
        <li>test1</li>
        <li>test2</li>
        <li>test3</li>
    </ul>
    <script>
        const lis = document.querySelectorAll('ul li')
        for(let i = 0; i < lis.length; i++){
            lis[i].style.color = 'red'
        }
    </script>
</body>
```

#### b. 其他获取 DOM 元素的方法

##### getElementById

[document.getElementById - Web API 接口参考 | MDN (mozilla.org)](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/getElementById)

```js
document.getElementById('id_name');
```

##### getElementsByTagName

[Document.getElementsByTagName() - Web API 接口参考 | MDN (mozilla.org)](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/getElementsByTagName)

```js
document.getElementsByTagName('tag_name');
```

##### getElementsByClassName

[Document.getElementsByClassName() - Web API 接口参考 | MDN (mozilla.org)](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/getElementsByClassName)

```js
document.getElementsClassName('class_name');
```

...

### 2.1.3 操作 DOM 对象

#### a. innerText & innerHTML 

```html
<body>
    <h1>一等奖：<span></span></h1>
    <h1>二等奖：<span></span></h1>
    <h1>三等奖：<span></span></h1>
    <script>
        const personArr = ['zhou', 'liu', 'xingchi', 'yvan', 'zhang'];
        const h1_span = document.querySelectorAll('h1 span')
        for (let index = 0; index < 3; index++) {
            random = Math.floor(Math.random() * personArr.length)
            h1_span[index].innerHTML = personArr.splice(random, 1)
        }
        console.log(personArr)
    </script>
</body>
```

#### b. 操作 DOM 属性

```js
	const link_a = document.querySelector('a');
	link_a.href = 'https://www.baidu.com';
	link_a.innerHTML = 'baidu';
```

#### c. 操作 DOM css 属性

##### 通过 style 属性操作 css

```html
<body>
    <div class="box"></div>
    <script>
        const box = document.querySelector('.box')
        box.style.width = '300px'
        box.style.backgroundColor = 'red'
        box.style.border = '2px solid blue'
        box.style.borderTop = '4px solid green'
    </script>
</body>
```

document.body

##### 操作 className 操作 css

覆盖原来的 class

```js
	const div = document.querySelector('div');
	div.className = 'box'
```

##### 通过 classList 操作类控制 css

[Element.classList - Web API 接口参考 | MDN (mozilla.org)](https://developer.mozilla.org/zh-CN/docs/Web/API/Element/classList)

```js
	const div = document.querySelector('div');
	div.classList.add('box')
	div.classList.remove('nav')
	div.classList.toggle('box') // 切换
	div.classList.add('nav')
	div.classList.replace('nav', 'box') // 替换
```

#### d. 操作 form 属性

<input type="text" value="computer" > text

```html
<body>
    <input type="text" value="computer" >
    <script>
        const uname = document.querySelector('input')
        console.log(uname.value)
        uname.value = 'macbook'
        uname.type = 'password'
    </script>
</body>
```

<input type="checkbox"> checkbox

```html
<body>
    <input type="checkbox"> 复选框
    <script>
        const ipt = document.querySelector('input')
        console.log(ipt.checked)
        ipt.checked = true
    </script>
</body>
```

<button>button</button>

```html
<body>
    <button></button>
    <script>
        const btn = document.querySelector('button')
        console.log(btn.disabled)
        btn.disabled = true
    </script>
</body>
```

#### e. 自定义属性

标准属性：标签天生自带的属性，比如 class id title 等，可以直接使用语法操作。

自定义属性：
- html5中推出来了专门的 data-自定义属性
- 在标签上一律以 data-开头
- 在 DOM 对象上一律以 dataset 对象方式获取

```html
<body>
    <div data-id="1" data-spm="info">1</div>
    <div data-id="2">2</div>
    <div data-id="3">3</div>
    <div data-id="4">4</div>
    <div data-id="5">5</div>
    <script>
        const div_num = document.querySelectorAll('div')
        for (let index = 0; index < div_num.length; index++) {
            const element = div_num[index];
            console.log(element.dataset.id)
        }
        const div1 = document.querySelector('div')
        console.log(div1.dataset.spm)
    </script>
</body>
```

### 2.1.4 定时器 - 间歇函数

能够使用定时器函数重复执行代码

定时器函数可以开启和关闭

```js
setInterval(func, times)
// 作用：每间隔一段时间调用这个函数，间隔时间为毫秒
```

```js
let stv1 = setInterval(() => {
	console.log('1000')
}, 1000);
console.log(stv1)
clearInterval(stv1)
```


## 2.2 day2 事件核心

### 2.2.1 事件监听

事件是在编程时系统内发生的动作或者发生的事情

就是让程序检测是否有事件产生，一旦有事件触发，就会立即调用一个函数做出相应，也成为 绑定事件或者注册事件

```js
元素对象.addEventListener('事件类型', func) // 事件源，触发类型，事件调用函数
```

#### a. 事件监听版本

DOM L0 `事件源.on事件 = function(){}`

DOM L2 `事件源.addEventList(事件, function(){})`

区别：on方式会被覆盖，<font color="#ff0000">addEventListener(事件，function(){})</font>方式可绑定多次，拥有事件更多特性，推荐使用

#### b. 事件监听类型

鼠标事件
- click 鼠标点击
- mouseenter 鼠标经过 √
- mouseleave 鼠标离开 √
- mouseover 鼠标经过（冒泡）
- mouseout 鼠标离开（冒泡）

焦点事件
- focus 获得焦点
- blur 失去焦点

<label>搜索</label> <input type="search" placeholder="请输入内容" id="inp_text">

```html
<label>搜索</label> <input type="text" placeholder="请输入内容" id="inp_text">
<script>
	const input_text = document.querySelector('#inp_text')
	input_text.addEventListener('focus', function() {
		input_text.placeholder = ''
	})
	input_text.addEventListener('blur', function(){
		input_text.placeholder = '请输入内容'
	})
</script>
```

键盘事件
- keydown 键盘按下触发
- keyup 键盘抬起触发

文本事件
- input 用户输入事件

```html
    <style>
        input {
            height: 50px;
            width: 200px;
            transition: all .3s;
        }
        input:focus {
            height: 70px;
            width: 230px;
        }
        span {
            color: green;
            transition: all 0.5s;
            opacity: 0;
        }
    </style>
</head>
<body>
    <label for="inp_text">
        > enter search:
        <input type="text" placeholder="enter search" id="inp_text">
        <span>0/20字</span>
    </label>
    <script>
        const inp_text = document.querySelector('#inp_text')
        const it_sp = document.querySelector('span')
        inp_text.addEventListener('input', function(){
            const inp_te_len = inp_text.value.length
            it_sp.innerText =  inp_te_len + '/20字'
            if(inp_te_len > 20){
                it_sp.style.color = "red"
                it_sp.style.opacity = "1"
            }else{
                it_sp.style.color = "green"
                it_sp.style.opacity = "1"
            }
        })
        inp_text.addEventListener('focus', function(){
            inp_text.placeholder = ''
        })
        inp_text.addEventListener('blur', function(){
            it_sp.style.opacity = "0"
        })
    </script>
```

### 2.2.2 事件对象

对象里有事件触发时的相关信息。

使用场景
- 判断用户按下哪个键，比如按下 enter 键可以发布信息。
- 判断鼠标点击了哪个元素，从而做相应的操作。

在事件绑定的回调函数的第一个参数就是事件对象

一半命名为 event ev e

```js
元素.addEventListener('click', function(e){ })
```

事件对象常用属性
- type 获取当前的事件类型
- clientX / clientY 获取光标相对于浏览器可见窗口左上角位置
- offset / offsetY 获取光标相对于当前 DOM 元素左上角的位置
- key 用户按下的键盘键的值，现在不提倡使用 keycode

```html
<body>
    <label for="inp_text">
        <input type="text" name="" id="inp_text">
    </label>
    <script>
        const inp_text = document.querySelector('#inp_text')
        inp_text.addEventListener('keyup', function(event) {
            if(event.key === 'Enter'){
                console.log(event.key)
            }
        })
    </script>
</body>
```

发表评论案例

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>发表评论案例</title>
    <style>
        input {
            height: 50px;
            width: 200px;
            transition: all .5s;
        }
        input:focus {
            height: 90px;
            width: 280px;
        }
        .it_sp {
            color: green;
            transition: all 0.5s;
            opacity: 0;
        }
        .comm .item {
            display: none;
        }
    </style>
</head>
<body>
    <label for="inp_text">
        > enter search:
        <input type="text" placeholder="enter search" id="inp_text">
        <span class="it_sp">0/20字</span>
        <div class="comm">
            <div class="item">
                <i class="avater"></i>
                <div class="info"></div>
                <span class="name"> hahah </span>
                <div class="text"></div>
                <div class="time"></div>
            </div>
        </div>
    </label>
    <script>
        const inp_text = document.querySelector('#inp_text')
        const it_sp = document.querySelector('.it_sp')
        const comm_s = document.querySelector('.comm')
        const item = document.querySelector('.comm .item')
        const name = document.querySelector('.comm .item .name')
        const time = document.querySelector('.comm .item .time')
        const text = document.querySelector('.comm .item .text')
        inp_text.addEventListener('input', function () {
            const inp_te_len = inp_text.value.length
            it_sp.innerText = `${inp_te_len}/20字`
            if (inp_te_len > 20) {
                it_sp.style.color = "red"
                it_sp.style.opacity = "1"
            }
            else {
                it_sp.style.color = "green"
                it_sp.style.opacity = "1"
            }
        })
        inp_text.addEventListener('focus', function () {
            inp_text.placeholder = ''
        })
        inp_text.addEventListener('blur', function () {
            it_sp.style.opacity = '0'
        })
        inp_text.addEventListener('keyup', function (e) {
            if (e.key === 'Enter') {
                const inp_tx = inp_text.value.trim()
                if(inp_tx){
                    name.innerText = 'wuyv'
                    text.innerText = inp_tx
                    time.innerHTML = Date.now()
                    item.style.display = 'block'
                }
                inp_text.value = ''
                it_sp.innerText = `${inp_text.value.length}/20字`
            }
        })
    </script>
</body>
</html>
```

### 2.2.3 环境对象

函数内部特殊的变量 <font color="#ff0000">this</font>， 它代表当前函数运行时所处的环境。

### 2.3.4 回调函数

将函数 A 作为参数传递给函数 B 时，称函数 A 为回调函数

### 2.3.5 综合案例

#### a. tab_switch

![[tab_switch.png|500]]

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tab栏切换</title>
    <style>
        .tab_info {
            margin: 0;
            padding: 0;
            width: 600px;
            height: 400px;
            background-color: aqua;
        }
        .tab_lst {
            margin: 0;
            padding: 0;
            width: 600px;
            height: 70px;
            background-color: aquamarine;
            text-align: center;
            line-height: 70px;
        }
        .tab_lst *{
            margin: 0;
            padding: 0;
            width: 150px;
            height: 70px;
            float: left;
        }
        .tab_emph {
            background-color: rgb(207, 101, 55);
        }
        .info_lst {
            margin: 0;
            padding: 0;
            width: 600px;
            height: 330px;
        }
        .info_lst *{
            margin: 0;
            padding: 0;
            width: 600px;
            height: 330px;
            background-color: greenyellow;
            display: none;
        }
        .active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="tab_info">
        <div class="tab_lst">
            <div class="tab_emph"><a href="javascript:;">tab1</a></div>
            <div><a href="javascript:;">tab2</a></div>
            <div><a href="javascript:;">tab3</a></div>
            <div><a href="javascript:;">tab4</a></div>
        </div>
        <div class="info_lst">
            <div class="active">tab1</div>
            <div>tab2</div>
            <div>tab3</div>
            <div>tab4</div>
        </div>
    </div>
    <script>
        const tab_lst_as = document.querySelectorAll('.tab_lst * a')
        const info_lst_ds = document.querySelectorAll('.info_lst div')
        for (let index = 0; index < tab_lst_as.length; index++) {
            const element = tab_lst_as[index];
            element.addEventListener('mouseenter', function(el) {
                document.querySelector('.tab_lst .tab_emph').classList.toggle('tab_emph')
                this.classList.toggle('tab_emph')
                document.querySelector('.info_lst .active').classList.toggle('active')
                info_lst_ds[index].classList.toggle('active')
            })
        }
    </script>
</body>
</html>
```

#### b. 表单全选反选案例

![[Web/0. web_images/checked_all.png|700]]

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>表单全选反选案例</title>
    <style>
        table {
            border-collapse: collapse;
            border: 1px solid blue;
            width: 500px;
            height: 200px;
        }
        thead tr th {
            border: 1px solid red;
            
            }
        tbody tr td {
            border: 1px solid blue;
        }
    </style>
</head>
<body>
    <table>
        <caption><h2>表单全选反选案例</h2></caption>
        <thead>
            <tr>
                <th class="all_check">
                    <label for="check_all">
                        <input type="checkbox" name="" id="check_all">
                        全选
                    </label>
                </th>
                <th>商品</th>
                <th>分类</th>
                <th>价格</th>
            </tr>
        </thead>
        <tbody class="tbody">
            <tr>
                <td><input type="checkbox" name="" class="ckb"></td>
                <td>Xiaomi 13U</td>
                <td>phone</td>
                <td>5999+</td>
            </tr>
            <tr>
                <td><input type="checkbox" name="" class="ckb"></td>
                <td>Apple Watch Series 9</td>
                <td>watch</td>
                <td>10048</td>
            </tr>
            <tr>
                <td><input type="checkbox" name="" class="ckb"></td>
                <td>HUAWEI Mate 60 Pro</td>
                <td>phone</td>
                <td>5999</td>
            </tr>
        </tbody>
    </table>
    <script>
        const check_all = document.querySelector('.all_check #check_all')
        const check_s = document.querySelectorAll('.tbody .ckb')
        check_all.addEventListener('click', function(e){
            for (let index = 0; index < check_s.length; index++) {
                const element = check_s[index];
                element.checked = check_all.checked
            }
        })
        for (let index = 0; index < check_s.length; index++) {
            const element = check_s[index];
            element.addEventListener('click', function(){
                inp_ck = document.querySelectorAll('.tbody input:checked')
                check_all.checked = inp_ck.length === check_s.length
            })
        }
    </script>
</body>
</html>
```

## 2.3 day3 事件进阶

### 2.3.1 事件流

#### a. 事件流与两个阶段说明

<font color="#ff0000">事件流</font> 指的是事件完整执行过程中的流动路径

<font color="#ff0000">事件流</font> 描述了页面接收事件的顺序

![[flow_of_events.png|700]]

通常建议使用事件冒泡，特殊情 况下可以使用事件捕获。

#### b. 事件捕获

Netscape Communicator 团队提出了另一种名为事件捕获的事件流。事件捕获的意思是最不具体的节 点应该最先收到事件，而最具体的节点应该最后收到事件。

所有浏览器都是从 window 对象开始捕获事件，而 DOM2 Events规范规定的是从 document 开始。

```js
DOM.addEventListener('事件类型', func(){
	;			 
}, true)
```

- `addEventListener()` 第三个参数传入 true 代表是捕获阶段触发
- 若传入 false 代表冒泡阶段触发，默认就是 false
- 若是用 L0 事件监听，则只有冒泡阶段，没有捕获

#### c. 事件冒泡

IE事件流被称为事件冒泡，这是因为事件被定义为从最具体的元素（文档树中最深的节点）开始触 发，然后向上传播至没有那么具体的元素（文档）。

当一个元素触发事件后，会依次向上调用所有父级元素的<font color="#ff0000">类型事件</font>

#### d. 阻止冒泡

若想把事件就限制在当前元素内，就需要阻止事件冒泡

```js
DOM.stopPropagation()
```

此方法可以阻断事件流动传播，不仅在冒泡阶段有效，捕获阶段也有效

#### e. 解绑事件

通过 <font color="#ff0000">addEventListener()</font> 添加的事件处理程序只能使用 <font color="#00b050">removeEventListener()</font> 并传入与添 加时同样的参数来移除

这意味着使用 <font color="#ff0000">addEventListener()</font> 添加的匿名函数无法移除，

```js
 function fn(){
	;
}

DOM.removeEventListener('click', fn)
```

#### f. 阻止元素默认行为

某些情况下需要阻止默认行为的发生，比如阻止链接的跳转，表单域的提交

```js
DOM.preventDefault()
```

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>阻止默认行为</title>
</head>
<body>
    <form action="http://www.baidu.com" method="get">
        <input type="submit" value="注册">
    </form>
    <script>
        const form_sub = document.querySelector('form')
        form_sub.addEventListener('submit', function(e){
            e.preventDefault()
        })
    </script>
</body>
</html>
```

### 2.3.2 事件委托

“过多事件处理程序”的解决方案是使用事件委托。事件委托利用事件冒泡，可以只使用一个事件处理程序来管理一种类型的事件

`event.target` 属性可以用来实现事件委托 (event delegation)，获取事件触发原始对象

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>事件委托</title>
</head>
<body>
    <ul>
        <li>li_1</li>
        <li>li_2</li>
        <li>li_3</li>
        <li>li_4</li>
        <li>li_5</li>
        <p>p</p>
    </ul>
    <script>
       const ul = document.querySelector('ul')
       ul.addEventListener('click', function (event) {
            let element = event.target
            if(element.tagName === 'li'.toUpperCase()){
                element.style.color = 'red'
            }
       }) 
    </script>
</body>
</html>
```


### 2.3.3 其他事件

#### a. 页面加载

load

加载外部资源（如图片、外联CSS 和 JavaScript等）加载完毕时触发的事件

- 有些时候需要等待页面资源全部处理完毕后做一些事情
- 老代码将 script 写在 head 中，这时候直接找 dom 元素找不到

事件名：load

监听页面所有资源加载完毕：给 window 添加 load 事件

```js
window.addEventListener('load', function(){
	;
})
```

DOMContentLoaded

当初始的 HTML 文档被完全加载和解析完成之后，DOMContentLoaded 事件被触发，而无需等待样式表、图像等完全加载

事件名：DOMContentLoaded

监听页面 DOM 加载完毕：给 document 添加 DOMContentLoaded 事件

```js
document.addEventListener('DOMContentLoaded', function(){
	;
})
```

#### b. 元素滚动

滚动条在滚动的时候持续触发的事件

很多网页需要检测用户把页面滚动到某个区域后做一些处理，比如固定导航栏，返回顶部

给 window 或 document 添加 scroll 事件

监听某个元素的内部滚动直接给某个元素添加即可

事件名：scroll

事件整个页面滚动

```js
window.addEventListener('scroll', function(event){
	;
})
```

##### scrollTo(x,y)

scrollTo() 方法可以把内容滚动到指定的坐标

window.scrollTop(0, 1000)

##### scrollLeft

`Element.scrollLeft` 属性可以读取或设置元素滚动条到元素左边的距离

注意如果这个元素的内容排列方向（[`direction`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/direction)）是`rtl` (right-to-left) ，那么滚动条会位于最右侧（内容开始处），并且`scrollLeft`值为 0。此时，当你从右到左拖动滚动条时，scrollLeft 会从 0 变为负数

```js
//获取滚动条到元素左边的距离
var sLeft = element.scrollLeft;
```

`scrollLeft`是一个整数，代表元素滚动条距离元素左边多少像素

```js
//设置滚动条滚动了多少像素
element.scrollLeft = 10;
```

`scrollLeft` 可以是任意整数，然而：
- 如果元素不能滚动（比如：元素没有溢出），那么`scrollLeft` 的值是 0
- 如果给`scrollLeft` 设置的值小于 0，那么`scrollLeft` 的值将变为 0
- 如果给`scrollLeft` 设置的值大于元素内容最大宽度，那么`scrollLeft` 的值将被设为元素最大宽度

##### scrollTop

`Element.scrollTop` 属性可以获取或设置一个元素的内容垂直滚动的像素数

一个元素的 `scrollTop` 值是这个元素的内容顶部（卷起来的）到它的视口可见内容（的顶部）的距离的度量。当一个元素的内容没有产生垂直方向的滚动条，那么它的 `scrollTop` 值为`0`

```js
// 获得滚动的像素数
var  intElemScrollTop = someElement.scrollTop;
```

运行此代码后， `intElemScrollTop` 是一个整数，即[`element`](https://developer.mozilla.org/zh-CN/docs/Web/API/Element)的内容向上滚动的像素数。

```js
// 设置滚动的距离
element.scrollTop = intValue;
```

`scrollTop` 可以被设置为任何整数值，同时注意：
- 如果一个元素不能被滚动（例如，它没有溢出，或者这个元素有一个"non-scrollable"属性）， `scrollTop`将被设置为`0`
- 设置`scrollTop`的值小于 0，`scrollTop` 被设为`0`
- 如果设置了超出这个容器可滚动的值，`scrollTop` 会被设为最大值

获取 html 对象

```html
document.documentElement
```

页面滚动

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            padding-top: 800px;
            height: 3000px;
        }
        div {
            display: none;
        }
    </style>
</head>
<div>
    CNN — Former President Donald Trump, the oldest candidate in the 2024 GOP presidential field, said there should notbe an age limit for the presidency but expressed support for requiring mental competency tests for candidates.
    “I’m all for the tests,” Trump told NBC’s Kristen Welker in an interview clip that aired Saturday, citing acognitive test he took in 2020 at Walter Reed National Military Medical Center. “I aced it. I get everything right.”
    But the former president, 77, cast doubt on the practicality of requiring such a test, adding, “A lot of people sayit’s not constitutional to do it.”
    Trump’s comments come as he considerably leads the Republican presidential pool to face President Joe Biden – who is 80 – in 2024.When asked if there is a need for a new generation to take the helm, Trump said, “It’s always time for a newgeneration.”
    But, he added, “Some of the greatest world leaders have been in their 80s,” though the 77-year-old quickly clarified that he’s “not anywhere very near 80, by the way.”
    The ages of the incumbent and the GOP front-runner have raised questions about whether they are fit for office, and other presidential candidates have used the issue to argue that they will not be effective leaders.
	Former Vice President Mike Pence, who is challenging his former boss for the GOP presidential nomination, told CNN in an interview that aired Sunday, “We don’t need a president whose too old and we don’t need a president whose too young.” But he stopped short of saying whether 77 is too old to be president.
    “I think that’s a judgment for voters,” Pence told CNN’s Jake Tapper on “State of the Union.” “I trust voters to make their decision, whether it be the mental competency of people or whether it be their age or energy level.”
    But Trump said the problem with his successor is “bigger” than his age.
    “I don’t think Biden is too old, but I think he is incompetent,” Trump said. “And that’s a bigger problem.”
    Biden, who would be 82 at the start of his next term if reelected, has also shrugged off concerns about his age in recent months. When asked why an 82-year-old would be the best fit for president, Biden told MSNBC in May that he has “acquired a hell of a lot of wisdom.”
    “I’m more experienced than anybody (who’s) ever run for the office,” he said, adding that he thinks he’s proven himself to be effective.
    However, a recent CNN poll showed that roughly three-quarters of Americans say they’re seriously concerned that Biden’s age might negatively affect his current level of physical and mental competence and his ability to serve out another term if reelected.
    This story has been updated with additional information Sunday.
</div>
<body>
    <script>
        const div = document.querySelector('div')
        const html = document.documentElement
        window.addEventListener('scroll', () => {
            // scrollTop 可读写
            let n = html.scrollTop
            console.log(n)
            div.style.display =  n >= 500 ? 'block' : 'none'
        })
    </script>
</body>
</html>
```

#### c. 页面尺寸

resize 浏览器窗口大小发生变化的时候触发的事件

获取元素可见部分

```js
window.addEventListener('resize', function(){
	// 获取元素可见部分的高和宽
	let h = document.documentElement.clientHight
	let w = document.documentElement.clientWidth
})
```

### 2.3.4 元素尺寸与位置

使用场景
- 页面滚动到某个位置，就可以做某些事。
- 通过 js 方式，得到元素再页面中的位置

#### a. 获取宽高

获取元素的自身宽高，包含元素自身设置的宽高 padding、border

offsetWidth

offsetHeight

获取的是可视宽高，如果盒子隐藏，获取结构是0

#### b. 获取位置 <font color="#ff0000">只读属性</font>

获取元素距离<font color="#ff0000">自己定位父级元素 `position` </font>的左、上距离

offsetLeft

offsetTop

```js
const div = document.querySelector('div')
const p = document.querySelector('p')
// 检测盒子的位置，最近一级带有定位的父级元素
console.log(p.offsetLeft)
```

### 2.3.5 综合案例

#### a. 委托实现Tab栏切换

![[tab_switch.png|600]]

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>委托实现Tab栏切换</title>
    <style>
        .tab_info {
            margin: 0;
            padding: 0;
            width: 600px;
            height: 400px;
            background-color: aqua;
        }
        .tab_lst {
            margin: 0;
            padding: 0;
            width: 600px;
            height: 70px;
            background-color: aquamarine;
            text-align: center;
            line-height: 70px;
        }
        .tab_lst *{
            margin: 0;
            padding: 0;
            width: 150px;
            height: 70px;
            float: left;
        }
        .tab_emph {
            background-color: rgb(207, 101, 55);
        }
        .info_lst {
            margin: 0;
            padding: 0;
            width: 600px;
            height: 330px;
        }
        .info_lst *{
            margin: 0;
            padding: 0;
            width: 600px;
            height: 330px;
            background-color: greenyellow;
            display: none;
        }
        .active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="tab_info">
        <div class="tab_lst">
            <div class="tab_emph"><a data-id="0" href="javascript:;">tab1</a></div>
            <div><a data-id="1" href="javascript:;">tab2</a></div>
            <div><a data-id="2" href="javascript:;">tab3</a></div>
            <div><a data-id="3" href="javascript:;">tab4</a></div>
        </div>
        <div class="info_lst">
            <div class="active">tab1</div>
            <div>tab2</div>
            <div>tab3</div>
            <div>tab4</div>
        </div>
    </div>
    <script>
        const tab_lst = document.querySelector('.tab_lst')
        tab_lst.addEventListener('click', function(event) {
            const element = event.target
            if(element.tagName === 'a'.toUpperCase()){
                document.querySelector('.tab_lst .tab_emph').classList.toggle('tab_emph')
                element.classList.toggle('tab_emph')
                document.querySelector('.info_lst .active').classList.toggle('active')
                document.querySelectorAll('.info_lst div')[element.dataset.id].classList.toggle('active')
                //实现方法二 document.querySelector(`.info_lst div:nth-child(${element.dataset.id}`).classList.toggle('active')
            }
        })
    </script>
</body>
</html>  
```

## 2.4 day4 DOM 操作 & 移动端滑动

### 2.4.1 日期对象

创建一个时间对象并获取时间。

#### a. 实例化

获取当前时间

```js
const date = new Date()
```

获取指定时间

```js
const date = new Date('2023-10-20 08:30:00')
```

#### b. 时间对象方法

日期时间格式化

常用日期对象方法
- 获取年份 `getFullYear()`
- 获得月份 `getMonth()` 0 ~ 11
- 获取月份中的每一天 `getDate()`
- 获取星期 `getDay()` 0 ~ 6
- 获取小时 `getHours()` 0 ~ 23
- 获取分钟 `getMinutes()` 0 ~ 59
- 获取秒 `getSeconds()` 0 ~ 59

TODO 116 - 14

#### c. 时间戳


## 2.5 day5 正则 & 阶段案例

## 2.6 day6 京东实战、放大镜、电梯导航

# JavaScript进阶

## day1 解构 & 箭头函数 & 剩余与展开

## day2 构造函数 & ES6函数

## day3 深入面向对象

## day4 异常、性能优化、深浅拷贝

# Ajax + Node.js + Webpack + Git

# 